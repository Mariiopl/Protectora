<div class="usuarios-container">
  <h2>Gestión de Usuarios</h2>

  <table class="tabla-usuarios">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Email</th>
        <th>Teléfono</th>
        <th>Dirección</th>
        <th>Tipo</th>
        <th>Fecha Registro</th>
        <th>Acciones</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let usuario of usuarios">
        <td>{{ usuario.idUsuario }}</td>
        <td>{{ usuario.nombre }}</td>
        <td>{{ usuario.email }}</td>
        <td>{{ usuario.telefono || "-" }}</td>
        <td>{{ usuario.direccion || "-" }}</td>
        <td>{{ usuario.tipoUsuario }}</td>
        <td>{{ usuario.fechaRegistro }}</td>
        <td>
          <button class="btn editar" (click)="editarUsuario(usuario)">
            Editar
          </button>
          <button class="btn eliminar" (click)="eliminarUsuario(usuario.idUsuario)">
            Eliminar
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <button class="btn nuevo" (click)="nuevoUsuario()">+ Nuevo Usuario</button>
</div>

<!-- MODAL -->
<div class="modal" *ngIf="modalVisible">
  <div class="modal-content">
    <h3>{{ editando ? 'Editar Usuario' : 'Nuevo Usuario' }}</h3>

    <label>Nombre</label>
    <input [(ngModel)]="form.nombre" type="text" />

    <label>Email</label>
    <input [(ngModel)]="form.email" type="email" />

    <label>Teléfono</label>
    <input [(ngModel)]="form.telefono" type="text" />

    <label>Dirección</label>
    <input [(ngModel)]="form.direccion" type="text" />

    <label>Tipo de Usuario</label>
    <select [(ngModel)]="form.tipoUsuario">
      <option value="adoptante">Adoptante</option>
      <option value="voluntario">Voluntario</option>
      <option value="empleado">Empleado</option>
      <option value="administrador">Administrador</option>
    </select>
    <!-- SOLO aparece si el usuario es empleado -->
<div *ngIf="form.tipoUsuario === 'empleado'">
  <label>Rol del empleado</label>
  <select [(ngModel)]="form.rolEmpleado">
    <option value="cuidador">Cuidador</option>
    <option value="limpieza">Limpieza</option>
    <option value="veterinario">Veterinario</option>
    <option value="administrador">Administrador</option>
    <option value="adopciones">Adopciones</option>
    <option value="stock">Stock</option>
  </select>
</div>

    <div class="modal-actions">
      <button class="guardar" (click)="guardar()">Guardar</button>
      <button class="cancelar" (click)="cerrarModal()">Cancelar</button>
    </div>
  </div>
</div>
