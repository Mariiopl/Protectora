<div class="container">
  <h2>Gestión de Tratamientos</h2>

  <form [formGroup]="form" (ngSubmit)="submit()">
    <div>
      <label>Mascota:</label>
      <select formControlName="idMascota">
        <option *ngFor="let m of mascotas" [value]="m.idMascota">{{ m.nombre }}</option>
      </select>
    </div>

    <div>
      <label>Tipo:</label>
      <select formControlName="tipo">
        <option *ngFor="let t of tipos" [value]="t">{{ t }}</option>
      </select>
    </div>

    <div>
      <label>Descripción:</label>
      <textarea formControlName="descripcion"></textarea>
    </div>

    <div>
      <label>Fecha:</label>
      <input type="date" formControlName="fecha">
    </div>

    <div>
      <label>Veterinario:</label>
      <select formControlName="idVeterinario">
        <option *ngFor="let v of veterinarios" [value]="v.idEmpleado">{{ v.nombre }}</option>
      </select>
    </div>

    <button type="submit">{{ editMode ? 'Actualizar' : 'Crear' }}</button>
    <button type="button" (click)="resetForm()">Cancelar</button>
  </form>

  <h3>Lista de Tratamientos</h3>
  <table>
    <thead>
      <tr>
        <th>Mascota</th>
        <th>Tipo</th>
        <th>Descripción</th>
        <th>Fecha</th>
        <th>Veterinario</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let t of tratamientos">
        <td>{{ t.mascota.nombre }}</td>
        <td>{{ t.tipo }}</td>
        <td>{{ t.descripcion }}</td>
        <td>{{ t.fecha }}</td>
        <td>{{ t.veterinario.nombre }}</td>
        <td>
          <button (click)="edit(t)">Editar</button>
          <button (click)="delete(t.idTratamiento)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
