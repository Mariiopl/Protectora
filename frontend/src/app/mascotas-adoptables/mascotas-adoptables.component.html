<div class="catalogo-container">
  <h2>游 Mascotas en Adopci칩n</h2>

  <div *ngIf="cargando" class="loading">Cargando mascotas...</div>

  <div class="grid" *ngIf="!cargando && mascotas.length > 0">

    <div class="card" *ngFor="let mascota of mascotas">

      <img [src]="'http://localhost:8080/api/mascotas/imagenes/' + mascota.foto" />

      <h3>{{ mascota.nombre }}</h3>

      <div class="info-basica">
        <p><strong>Especie:</strong> {{ mascota.especie }}</p>
        <p><strong>Raza:</strong> {{ mascota.raza }}</p>
        <p><strong>Edad:</strong> {{ mascota.edad }} a침os</p>
        <p><strong>Sexo:</strong> {{ mascota.sexo }}</p>
        <p><strong>Tama침o:</strong> {{ mascota.tamano }}</p>
      </div>

      <div *ngIf="mascota.mostrarDetalles" class="detalles">
        <p><strong>Car치cter:</strong> {{ mascota.caracter }}</p>
        <p><strong>Necesidades especiales:</strong> {{ mascota.necesidadesEspeciales || 'Ninguna' }}</p>
        <p><strong>Esterilizado:</strong> {{ mascota.esterilizado ? 'S칤' : 'No' }}</p>
        <p><strong>Vacunado:</strong> {{ mascota.vacunado ? 'S칤' : 'No' }}</p>
        <p><strong>Desparasitado:</strong> {{ mascota.desparasitado ? 'S칤' : 'No' }}</p>
        <p><strong>Estado adopci칩n:</strong> {{ mascota.estadoAdopcion }}</p>
        <p><strong>Ubicaci칩n:</strong> {{ mascota.ubicacion }}</p>
        <p><strong>Fecha ingreso:</strong> {{ mascota.fechaIngreso }}</p>
        <p class="desc"><strong>Historia:</strong> {{ mascota.historia }}</p>
      </div>

      <div class="btn-group">
        <button class="btn info" (click)="toggleDetalles(mascota)">
          {{ mascota.mostrarDetalles ? 'Ver menos' : 'Ver m치s' }}
        </button>

        <button class="btn adoptar" (click)="adoptar(mascota)">
          仇벒잺 Adoptar
        </button>
      </div>

    </div>
  </div>

  <div *ngIf="!cargando && mascotas.length === 0">
    <p>No hay mascotas adoptables 游냤游냠</p>
  </div>
</div>

<!-- MODAL ADOPCI칍N -->
<div class="modal-backdrop" *ngIf="mostrarModal">
  <div class="modal">
    <div class="modal-header">
      <h3>Formulario de Adopci칩n: {{ mascotaSeleccionada?.nombre }}</h3>
      <button class="close-btn" (click)="cerrarModal()">칑</button>
    </div>

    <div class="modal-form">

      <label>Experiencia con animales</label>
      <textarea [(ngModel)]="adopcion.experiencia"></textarea>

      <label>Tipo de vivienda</label>
      <input type="text" [(ngModel)]="adopcion.tipoVivienda" />

      <label>Comentarios</label>
      <textarea [(ngModel)]="adopcion.comentarios"></textarea>

      <div class="modal-buttons">
        <button class="btn cancelar" (click)="cerrarModal()">Cancelar</button>
        <button class="btn enviar" (click)="enviarSolicitud()">Enviar</button>
      </div>
    </div>
  </div>
</div>
